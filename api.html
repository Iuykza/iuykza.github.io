<!DOCTYPE html><head><title>Shiftswap | API</title><meta charset="UTF-8"><link rel="icon" type="image/png" href="img/shiftswap-logo.png"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous"><link rel="stylesheet" href="css/main.css"><link rel="stylesheet" href="css/api.css"></head><body><header><section class="jumbotron logo"><div><h1>Shiftswap</h1><p>Makes trading shifts easier for Cinemark employees</p></div></section><section class="blog-masthead"><div class="container"><nav class="blog-nav"><a class="blog-nav-item" href="index.html">Home</a> <a class="blog-nav-item" href="whats-this.html">SS Explained</a> <a class="blog-nav-item" href="stats.html">Statistics</a> <span>|</span> <a class="blog-nav-item" href="news.html">News</a> <a class="blog-nav-item" href="starbucks.html">Learn Starbucks</a> <a class="blog-nav-item" href="movies.html">Movies</a><div class="login-badge"><a id="login" class="blog-nav-item btn btn-primary" ng-class="isLogged" href="">Login</a> <a id="signup" class="blog-nav-item btn btn-secondary" ng-class="isLogged" href="">Signup</a></div></nav></div></section></header><section class="container"><h1>API</h1><p>This is the API Shiftswap uses for its backend. It is RESTful HTTP and it sends JSON responses. The server address is <code>http://api.shiftswapsanity.xyz</code> or if locally run <code>http://localhost:3000</code>. Be sure to include a version number <code>/v1/</code>. Typical addresses may look like this <code>http://api.shiftswapsanity.xyz/v1/users</code>.</p><h2>HTTP verbs</h2><p>These provide the particular action we want to perform on a resource. For example GET on /users will read in user data.</p><table><tr><th>Verb</th><th>CRUD</th></tr><tr><td>GET</td><td>Read</td></tr><tr><td>POST</td><td>Create</td></tr><tr><td>PUT</td><td>Update or replace</td></tr><tr><td>PATCH</td><td>Update or modify</td></tr><tr><td>DELETE</td><td>Delete</td></tr></table><a href="http://www.restapitutorial.com/lessons/httpmethods.html"></a><h2>General usage</h2><p>Combine a verb with a resource at the server address, and you can interact with the API.</p><p>To get a list of users, send a GET to <code>http://api.shiftswapsanity.xyz/v1/users</code>. You can test this out right now by copying and pasting that <a href="http://api.shiftswapsanity.xyz/v1/users">link</a>. If it works correctly you should see a JSON array full of users.</p><p>So what does all this in the address mean?</p><ul><li><code>GET</code> is the HTTP verb, as in we want to <em>get</em> the list of users</li><li><code>http</code> is the protocol</li><li><code>api.shiftswapsanity.xyz</code> is the server address</li><li><code>v1</code> is the version</li><li><code>users</code> is the resource we want</li></ul><p>If you wanted to read schedule data simply change the resource <code>users</code> to <code>schedule</code> which will look like this.</p><p><code>GET</code> <code>http://api.shiftswapsanity.xyz/v1/schedule</code></p><p>Changing the verb from GET to POST will create a schedule.</p><p><code>POST</code> <code>http://api.shiftswapsanity.xyz/v1/schedule</code></p><p>A full list of all the requests you can make to the server is below under <a href="#defs">Definitions</a>.</p><h2>Authentication</h2><p>While the API itself does not require auth, accessing the more private commands do. Auth is based upon the user's role, and roles have different levels of access. These levels are:</p><table id="auth-table"><tr><td>S</td><td>Self - a user can access himself</td></tr><tr><td>F</td><td>Floor employee</td></tr><tr><td>M</td><td>Manager</td></tr><tr><td>G</td><td>General Manager</td></tr><tr><td>A</td><td>Administrator</td></tr></table><p>To authenticate... TODO</p><h2>Top level folders</h2><ul><li>user</li><li>schedule</li><li>trade</li><li>sms</li><li>site</li></ul><h1>Definitions</h1><section class="container folder"><h2>user</h2><p>Gets public user data.</p><h3>Usage</h3><article class="table"><div><span><strong>Verb</strong></span> <span><strong>Auth</strong></span> <span><strong>Folder</strong></span> <span><strong>Description</strong></span></div><div><span>GET</span> <span></span> <span>/user</span> <span>Get public data for all users</span></div><div><span>GET</span> <span></span> <span>/user/private/<em>:uid</em></span> <span>Get private data of a specified user</span></div><div><span>POST</span> <span></span> <span>/user</span> <span>Create a new user</span></div><div><span>PATCH</span> <span>s m+</span> <span>/user/<em>:uid</em></span> <span>Edit a user</span></div><div><span>DELETE</span> <span>s g+</span> <span>/user/<em>:uid</em></span> <span>Delete a user</span></div></article><h3>Parameters</h3><dl><dt>:uid</dt><dd>Integer. A user's unique 6 digit ID number.</dd></dl><h3>Example</h3><p>Send <code>http://shiftswap.com/api/userid/1007</code></p><p>Receive <code>{"userid":1007,"name":"Douglas S. Morrison","role":"gm","lastlog":"null"}</code></p></section><section class="container folder"><h2>schedule</h2><p>Gets the schedule for all employees or managers with all of its shift times and descriptions.</p><h3>Usage</h3><article class="table"><div><span><strong>Verb</strong></span> <span><strong>Auth</strong></span> <span><strong>Folder</strong></span> <span><strong>Description</strong></span></div><div><span>GET</span> <span></span> <span>/schedule</span> <span>Gets this 7 day schedule for all floor employees</span></div><div><span>GET</span> <span>m+</span> <span>/schedule/manager</span> <span>Gets this 7 day schedule for all managers</span></div><div><span>GET</span> <span>*m+</span> <span>/schedule/user/<em>:uid</em></span> <span>Gets this month schedule for a specific employee<br><em>*auth required if grabbing a manager</em></span></div><div><span>GET</span> <span></span> <span>/schedule/date/<em>:date</em></span> <span>Gets a specific 7 day schedule for all floor employees</span></div><div><span>GET</span> <span>m+</span> <span>/schedule/date/<em>:date</em>/manager</span> <span>Gets a specific 7 day schedule for all managers</span></div><div><span>GET</span> <span>*m+</span> <span>/schedule/date/<em>:date</em>/user/<em>:uid</em></span> <span>Gets a specific month schedule for a specific employee<br><em>*auth required if grabbing a manager</em></span></div><div><span>POST</span> <span></span> <span>/schedule</span> <span>Create a new shift</span></div><div><span>PATCH</span> <span>g+</span> <span>/schedule/sid/<em>:sid</em></span> <span>Edit a shift by schedule id.</span></div><div><span>PATCH</span> <span>g+</span> <span>/schedule/date/<em>:date</em>/uid/<em>:uid</em></span> <span>Edit a shift by date and user id.</span></div><div><span>DELETE</span> <span>g+</span> <span>/schedule/sid/<em>:sid</em></span> <span>Delete a shift by schedule id.</span></div><div><span>DELETE</span> <span>g+</span> <span>/schedule/date/<em>:date</em>/uid/<em>:uid</em></span> <span>Delete a shift by date and user id.</span></div></article><h3>Parameters</h3><dl><dt>:uid</dt><dd>Integer. A user's unique 6 digit ID number.</dd><dt>:sid</dt><dd>Integer. A shift's unique ID number.</dd><dt>:date</dt><dd>String. A western date in MM-DD-YYYY. Or UNIX timestamp in seconds 10 characters long.</dd></dl><h3>Example</h3><p>Send <code>http://api.shiftswapsanity.xyz/v1/schedule</code></p><p>Receive <code>{"userid":1007,"name":"Douglas S. Morrison","role":"gm","lastlog":"null"}</code></p></section><section class="container folder"><h2>trade</h2><p>Gets shift trades.</p><h3>Usage</h3><article class="table"><div><span><strong>Verb</strong></span> <span><strong>Auth</strong></span> <span><strong>Folder</strong></span> <span><strong>Description</strong></span></div><div><span>GET</span> <span></span> <span>/trade</span> <span>Gets all pending trades for floor employees</span></div><div><span>GET</span> <span>m+</span> <span>/trade/manager/</span> <span>Gets all pending trades for managers</span></div><div><span>POST</span> <span></span> <span>/trade</span> <span>Creates a new trade</span></div><div><span>POST</span> <span>m+</span> <span>/trade/user/<em>:uid</em></span> <span>Creates a new trade for a different user</span></div><div><span>PATCH</span> <span>m+</span> <span>/trade/<em>:tid</em></span> <span>Edit a trade</span></div><div><span>PATCH</span> <span>*m g</span> <span>/trade/finish/<em>:tid</em></span> <span>Accept or reject a trade and sends confirmations to affected users<br><br><em>*Floor trades can be completed by mangers</em><br><em>*Manager trades can be completed by GM</em></span></div><div><span>DELETE</span> <span>m+</span> <span>/trade/:tid</span> <span>Delete a trade</span></div></article><h3>Parameters</h3><dl><dt>:tid</dt><dd>Integer. A trade's unique ID number.</dd></dl><h3>Example</h3><p>Send <code>http://api.shiftswapsanity.xyz/v1/trade</code></p><p>Receive <code></code></p></section><section class="container folder"><h2>sms</h2><p>SMS text message sending and receiving.</p><h3>Usage</h3><article class="table"><div><span><strong>Verb</strong></span> <span><strong>Auth</strong></span> <span><strong>Folder</strong></span> <span><strong>Description</strong></span></div><div><span>POST</span> <span></span> <span>/sms/poll</span> <span>Entry point to be used by the SMS Twilio API</span></div><div><span>POST</span> <span></span> <span>/sms/send/user/<em>:uid</em></span> <span>Send a text to a user by their id</span></div></article></section><section class="container folder"><h2>site</h2><p>Miscellaneous settings about the site which can be editted by admins.</p><h3>Usage</h3><article class="table"><div><span><strong>Verb</strong></span> <span><strong>Auth</strong></span> <span><strong>Folder</strong></span> <span><strong>Description</strong></span></div><div><span>GET</span> <span></span> <span>/site</span> <span>Gets public settings about site</span></div><div><span>GET</span> <span>g+</span> <span>/site/private</span> <span>Gets private settings about site</span></div><div><span>PATCH</span> <span>g+</span> <span>/site</span> <span>Make changes to site settings</span></div></article></section></section><footer class="jumbotron"><div class="row"><section class="col-md-2"><h2>Website</h2><ul><li><a href="site-map.html">Site map</a></li><li><a href="faq.html">FAQ</a></li><li><a href="about.html">About</a></li><li><a href="costs.html">Costs</a></li><li><a href="donations.html">Donate</a></li><li><a href="contact.html">Contact us</a></li></ul></section><section class="col-md-2"><h2>Developers</h2><ul><li><a href="develop.html">Getting started</a></li><li><a href="api.html">API</a></li><li><a href="https://github.com/Iuykza/Shiftswap">GitHub</a></li><li><a href="#">Worklog</a></li></ul></section><section class="col-md-2"><h2>Legal</h2><ul><li><a href="policy.html">Private policy</a></li><li><a href="content.html">Content use</a></li><li><a href="license.html">License</a></li></ul></section></div></footer><script>Array.of||(Array.of=function(){return Array.prototype.slice.call(arguments)})</script><script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script><script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script><script>function injectScript(i){document.write('<script src="js/vendor/'+i+".js><\/script>")}window.jQuery||injectScript("jquery-2.2.3.min"),window.jQuery.fn.modal||injectScript("bootstrap.min")</script></body>